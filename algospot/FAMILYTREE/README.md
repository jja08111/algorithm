 # 해결 
처음에 보자마자 떠오른 생각은 "두 노드의 공통 조상 중 최소값을 찾으면 되는데 어떻게 RMQ를 이용하지?" 이었다.  
이 문제는 트리에서 두 노드의 최소 공통 조상(least/lowest common ancestor, LCA)를 찾는 문제와 밀접하게 연관되어 있다.  
그렇다면 어떻게 LCA를 찾는다는 말인가?  

![tree](https://algospot.com/media/judge-attachments/52a11e471716e8816ece02feb792f583/a.png)

위 트리를 재귀호출하여 순회하는데 이때 재귀호출후 다시 돌아오는 부분도 기록하면 다음과 같다.  
- 0 1 2 1 3 4 3 5 3 1 0 6 7 6 0 8 9 10 9 11 9 8 12 8 0

이 경로의 길이는 전체 간선이 n-1개 이니 내려갔다 올라오는 2번을 반복하기 때문에 2n-2인데, 여기서 루트에서 시작하니 길이는 2n-1이다.  
손으로 전위 순회과정을 따라가 보면 아래와 같은 점을 깨달을 수 있다.  
- u를 포함하는 서브트리에서 v를 포함하는 서브트리로 넘어가려면 LCA(u,v)를 항상 거쳐야한다.  
- LCA(u,v)의 부모 노드를 방문하려면 LCA(u,v)를 루트로 하는 서브트리는 이미 방문한 후여야 한다.  
 
이와 같은 특성을 이용하여 트리의 순회 결과를 저장한다.  

10과 12의 LCA는 손으로 따라가 보면 알 수 있듯이 각 노드가 처음 방문하는 위치를 알면 부분 수열 {10,9,11,9,8,12}의 최소값 8이라는 것을 알 수 있다.  

이미지의 트리처럼 전위순회를 하며 번호를 매기면 부모의 번호는 자손의 번호보다 작은 번호를 얻어야 한다.  

LCA를 알아내었으면 두 노드와 LCA의 거리를 depth를 이용하여 계산하면 경로의 길이를 구할 수 있다.  
